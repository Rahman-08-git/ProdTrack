<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProdTrack — Productivity Tracker</title>
  <meta name="description"
    content="A minimalist productivity tracker. Track your work sessions, manage tasks, and visualize your progress with ProdTrack." />
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>" />
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <div id="app">
    <!-- Sidebar Navigation -->
    <nav id="sidebar">
      <div class="sidebar-brand">
        <span class="brand-icon">⚡</span>
        <span class="brand-text">ProdTrack</span>
      </div>
      <div class="nav-links">
        <button class="nav-btn active" data-tab="home" id="nav-home">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            <polyline points="9 22 9 12 15 12 15 22" />
          </svg>
          <span>Home</span>
        </button>
        <button class="nav-btn" data-tab="analytics" id="nav-analytics">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="20" x2="18" y2="10" />
            <line x1="12" y1="20" x2="12" y2="4" />
            <line x1="6" y1="20" x2="6" y2="14" />
          </svg>
          <span>Analytics</span>
        </button>
      </div>
      <div class="nav-bottom">
        <button class="nav-btn" id="sync-btn" title="Sync Data">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 4 23 10 17 10" />
            <polyline points="1 20 1 14 7 14" />
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
          </svg>
          <span>Sync</span>
        </button>
        <!-- Auth Section -->
        <div id="auth-section">
          <button class="nav-btn" id="auth-login-btn" title="Sign in with Google">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            <span>Sign In</span>
          </button>
          <div id="auth-user-info" class="auth-user-info" style="display:none">
            <div class="auth-user-row">
              <img id="auth-avatar" class="auth-avatar" src="" alt="" />
              <span id="auth-name" class="auth-name"></span>
            </div>
            <button class="nav-btn" id="auth-logout-btn" title="Sign out">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1-2 2h4" />
                <polyline points="16 17 21 12 16 7" />
                <line x1="21" y1="12" x2="9" y2="12" />
              </svg>
              <span>Sign Out</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
      <!-- Home Tab -->
      <section id="tab-home" class="tab-content active">
        <!-- Stats Overview -->
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-label">Today</div>
            <div class="stat-value" id="stat-today">0h 0m</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">This Month</div>
            <div class="stat-value" id="stat-month">0h 0m</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Lifetime</div>
            <div class="stat-value" id="stat-lifetime">0h 0m</div>
          </div>
        </div>

        <!-- Timer + Tasks Row -->
        <div class="home-grid">
          <!-- Timer Section -->
          <div class="card timer-card">
            <div class="card-header">
              <h2>Timer</h2>
              <div class="timer-mode-toggle">
                <button class="mode-btn active" data-mode="pomodoro" id="mode-pomodoro">Pomodoro</button>
                <button class="mode-btn" data-mode="stopwatch" id="mode-stopwatch">Stopwatch</button>
              </div>
            </div>
            <div class="timer-display">
              <div class="timer-ring">
                <svg viewBox="0 0 200 200" id="timer-ring-svg">
                  <circle cx="100" cy="100" r="90" class="ring-bg" />
                  <circle cx="100" cy="100" r="90" class="ring-progress" id="timer-ring-progress" />
                </svg>
                <div class="timer-time" id="timer-display">25:00</div>
              </div>
            </div>
            <div class="timer-task-label" id="timer-task-label"></div>
            <div class="pomodoro-settings" id="pomodoro-settings">
              <label>
                <span>Duration (min)</span>
                <input type="number" id="pomodoro-duration" value="25" min="1" max="180" />
              </label>
            </div>
            <div class="timer-controls">
              <button class="btn btn-primary" id="timer-start">Start</button>
              <button class="btn btn-secondary" id="timer-reset">Reset</button>
            </div>
          </div>

          <!-- Tasks Section -->
          <div class="card tasks-card">
            <div class="card-header">
              <h2>Today's Tasks</h2>
              <span class="task-count" id="task-count">0/0</span>
            </div>
            <form class="task-input-row" id="task-form">
              <input type="text" id="task-input" placeholder="Add a new task..." autocomplete="off" />
              <button type="submit" class="btn btn-primary btn-sm">+</button>
            </form>
            <ul class="task-list" id="task-list"></ul>
          </div>
        </div>

        <!-- Manual Time Entry -->
        <div class="card manual-entry-card">
          <div class="card-header">
            <h2>Log Worked Time</h2>
          </div>
          <div class="manual-entry-row">
            <div class="manual-entry-inputs">
              <label>
                <span>Date</span>
                <input type="date" id="manual-date" />
              </label>
              <label>
                <span>Hours</span>
                <input type="number" id="manual-hours" value="0" min="0" max="23" />
              </label>
              <label>
                <span>Minutes</span>
                <input type="number" id="manual-minutes" value="0" min="0" max="59" />
              </label>
            </div>
            <div class="manual-entry-task">
              <label>
                <span>Task (optional)</span>
                <select id="manual-task-select">
                  <option value="">No task</option>
                </select>
              </label>
            </div>
            <button class="btn btn-primary" id="manual-log-btn">Log Time</button>
          </div>
        </div>

        <!-- Heatmap Section -->
        <div class="card heatmap-card">
          <div class="card-header">
            <h2>Activity</h2>
            <div class="heatmap-nav">
              <button class="btn btn-icon" id="heatmap-prev">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="15 18 9 12 15 6" />
                </svg>
              </button>
              <span id="heatmap-month-label">February 2026</span>
              <button class="btn btn-icon" id="heatmap-next">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6" />
                </svg>
              </button>
            </div>
          </div>
          <div class="heatmap-container" id="heatmap-container"></div>
          <div class="heatmap-legend">
            <span>Less</span>
            <span class="legend-cell" style="background: var(--heat-0)"></span>
            <span class="legend-cell" style="background: var(--heat-1)"></span>
            <span class="legend-cell" style="background: var(--heat-2)"></span>
            <span class="legend-cell" style="background: var(--heat-3)"></span>
            <span class="legend-cell" style="background: var(--heat-4)"></span>
            <span>More</span>
          </div>
        </div>
      </section>

      <!-- Analytics Tab -->
      <section id="tab-analytics" class="tab-content">
        <div class="analytics-header">
          <h2>Analytics</h2>
          <div class="month-selector">
            <label for="analytics-month">Month:</label>
            <input type="month" id="analytics-month" />
          </div>
        </div>

        <!-- Per-Task Time Analytics -->
        <div class="card task-analytics-section" id="task-analytics-section">
          <h3>Time Per Task</h3>
          <div class="task-time-grid" id="task-time-grid"></div>
        </div>

        <!-- Hours Chart -->
        <div class="card chart-card">
          <h3>Hours Worked Per Day</h3>
          <div class="chart-container">
            <canvas id="hours-chart"></canvas>
          </div>
        </div>

        <!-- Task History Table -->
        <div class="card table-card">
          <h3>Task History</h3>
          <div class="table-container">
            <table id="task-history-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Tasks Completed</th>
                  <th>Hours Worked</th>
                </tr>
              </thead>
              <tbody id="task-history-body"></tbody>
            </table>
          </div>
        </div>

        <!-- Session Log -->
        <div class="card table-card">
          <h3>Session Log</h3>
          <p class="session-log-hint">Edit or delete individual work sessions.</p>
          <div class="table-container">
            <table id="session-log-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Duration</th>
                  <th>Type</th>
                  <th>Task</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="session-log-body"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Sync Modal -->
  <div class="modal-overlay" id="sync-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Sync Data</h2>
        <button class="btn btn-icon modal-close" id="sync-modal-close">✕</button>
      </div>
      <div class="modal-body">
        <p>Export your data to a JSON file, or import data from another device.</p>
        <div class="sync-actions">
          <button class="btn btn-primary" id="sync-export">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="7 10 12 15 17 10" />
              <line x1="12" y1="15" x2="12" y2="3" />
            </svg>
            Export Data
          </button>
          <button class="btn btn-secondary" id="sync-import">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="17 8 12 3 7 8" />
              <line x1="12" y1="3" x2="12" y2="15" />
            </svg>
            Import Data
          </button>
          <input type="file" id="sync-file-input" accept=".json" style="display:none" />
        </div>
      </div>
    </div>
  </div>

  <!-- Task Selection Modal -->
  <div class="modal-overlay" id="task-select-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Select a Task</h2>
        <button class="btn btn-icon modal-close" id="task-select-close">✕</button>
      </div>
      <div class="modal-body">
        <p>Which task are you working on?</p>
        <ul class="task-select-list" id="task-select-list"></ul>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button class="btn btn-secondary" id="task-select-none-btn">No task</button>
          <button class="btn btn-primary" id="task-select-confirm">Start</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/main.js"></script>
</body>

</html>